<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portal V5.0.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --accent: #ff7b00;
            --accent-glow: rgba(255, 123, 0, 0.4);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-main: #ffffff;
            --text-muted: #rgba(255, 255, 255, 0.6);
        }

        * { box-sizing: border-box; outline: none; }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            height: 100vh;
            background-color: #050505;
            background-image: 
                radial-gradient(at 0% 0%, hsla(253,16%,7%,1) 0, transparent 50%), 
                radial-gradient(at 50% 0%, hsla(225,39%,30%,1) 0, transparent 50%), 
                radial-gradient(at 100% 0%, hsla(339,49%,30%,1) 0, transparent 50%);
            color: var(--text-main);
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- GLASS CARD STYLE --- */
        .glass-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid var(--glass-border);
            border-radius: 24px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
        }

        /* --- 1. LOGIN SCREEN --- */
        #login-screen {
            width: 100%;
            height: 100%;
            position: absolute;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }

        .login-card {
            width: 400px;
            padding: 40px;
            text-align: center;
        }

        .logo-circle {
            width: 80px;
            height: 80px;
            background: var(--accent);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 20px var(--accent-glow);
            font-size: 32px;
            font-weight: 800;
            color: white;
        }

        h1 { margin: 0 0 10px; font-weight: 600; letter-spacing: -1px; }
        p { color: rgba(255,255,255,0.5); margin: 0 0 30px; font-size: 0.9rem; }

        .input-box {
            position: relative;
            margin-bottom: 20px;
        }

        input {
            width: 100%;
            padding: 16px;
            background: rgba(0,0,0,0.3);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            transition: all 0.3s;
        }

        input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 15px var(--accent-glow);
        }

        .primary-btn {
            width: 100%;
            padding: 16px;
            background: var(--accent);
            border: none;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .primary-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px var(--accent-glow);
        }

        #login-error {
            color: #ff4d4d;
            margin-top: 15px;
            font-size: 0.9rem;
            display: none;
        }

        /* --- 2. DASHBOARD --- */
        #dashboard {
            display: none; /* Hidden initially */
            width: 90%;
            max-width: 1200px;
            height: 90vh;
            flex-direction: column;
        }

        .nav-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            margin-bottom: 20px;
        }

        .nav-logo { font-weight: 800; font-size: 1.5rem; letter-spacing: -1px; display: flex; align-items: center; gap: 10px; }
        .nav-logo span { color: var(--accent); }

        .status-pill {
            padding: 8px 16px;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .content-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            flex: 1;
        }

        .tool-card {
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            transition: all 0.3s;
            cursor: pointer;
            min-height: 250px;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.08);
            border-color: var(--accent);
        }

        .card-icon {
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            color: var(--accent);
        }

        .card-title { font-size: 1.5rem; font-weight: 600; margin-bottom: 10px; }
        .card-desc { color: rgba(255,255,255,0.5); line-height: 1.5; }

        .logout-link {
            color: rgba(255,255,255,0.4);
            text-decoration: none;
            font-size: 0.9rem;
            transition: color 0.2s;
            cursor: pointer;
        }
        .logout-link:hover { color: #ff4d4d; }

        /* --- 3. CONTRACT MODAL --- */
        #app-modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            z-index: 100;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .modal-body {
            width: 800px;
            max-height: 90vh;
            overflow-y: auto;
            background: #1a1a1a; /* Solid dark for readability */
            border: 1px solid #333;
            border-radius: 20px;
            padding: 40px;
            position: relative;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        .close-btn {
            position: absolute;
            top: 20px; right: 20px;
            background: none; border: none;
            color: #666; font-size: 24px;
            cursor: pointer;
        }
        .close-btn:hover { color: white; }

        /* FORM STYLING IN MODAL */
        .row { display: flex; gap: 20px; margin-bottom: 15px; }
        .field { flex: 1; }
        .field label { display: block; color: #888; font-size: 0.8rem; margin-bottom: 8px; font-weight: 600; }
        
        .modal-input {
            width: 100%;
            padding: 12px;
            background: #2a2a2a;
            border: 1px solid #333;
            border-radius: 8px;
            color: white;
            font-size: 1rem;
        }
        .modal-input:focus { border-color: var(--accent); }

        .btn-group {
            display: flex;
            background: #2a2a2a;
            padding: 4px;
            border-radius: 8px;
        }
        .toggle-opt {
            flex: 1;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            border-radius: 6px;
            color: #888;
            font-weight: 600;
            transition: all 0.2s;
        }
        .toggle-opt.active {
            background: var(--accent);
            color: white;
        }

        .math-box {
            background: #252525;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }
        .math-row {
            display: flex; justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: #ccc;
        }
        .math-total {
            border-top: 1px solid #444;
            padding-top: 10px;
            margin-top: 10px;
            font-weight: bold;
            color: var(--accent);
            font-size: 1.2rem;
        }

    </style>
</head>
<body>

    <div id="login-screen">
        <div class="glass-panel login-card">
            <div class="logo-circle">CC</div>
            <h1>Work Portal</h1>
            <p>Authorized Personnel Only</p>
            
            <form id="login-form">
                <div class="input-box">
                    <input type="password" id="password-input" placeholder="Access Code" required>
                </div>
                <button type="submit" class="primary-btn">Enter System</button>
            </form>
            <div id="login-error">Access Denied</div>
        </div>
    </div>

    <div id="dashboard">
        <div class="glass-panel nav-bar">
            <div class="nav-logo"><span>CC</span>PORTAL</div>
            <div style="display:flex; align-items:center; gap:20px;">
                <div class="status-pill">
                    <span style="width:8px; height:8px; background:#0f0; border-radius:50%;"></span>
                    <span id="live-clock">12:00 PM</span>
                </div>
                <a id="logout-btn" class="logout-link">Log Out</a>
            </div>
        </div>

        <div class="content-grid">
            <div class="glass-panel tool-card" id="open-contract">
                <div>
                    <div class="card-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>
                    </div>
                    <div class="card-title">Contract Generator</div>
                    <div class="card-desc">Create printable EasyPay installment contracts. Auto-calculates tax (8.9%) and monthly terms.</div>
                </div>
                <div style="margin-top:20px; color:var(--accent); font-weight:bold; font-size:0.9rem;">OPEN TOOL &rarr;</div>
            </div>

            <div class="glass-panel tool-card" style="opacity:0.5; cursor:default;">
                <div>
                    <div class="card-icon" style="color:#666;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                    </div>
                    <div class="card-title">Troubleshooter</div>
                    <div class="card-desc">Device database and step-by-step fix guides.</div>
                </div>
                <div style="margin-top:20px; font-size:0.8rem;">COMING SOON</div>
            </div>

            <div class="glass-panel tool-card" style="opacity:0.5; cursor:default;">
                <div>
                    <div class="card-icon" style="color:#666;">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    </div>
                    <div class="card-title">Porting Guide</div>
                    <div class="card-desc">Carrier PINs and transfer requirements.</div>
                </div>
                <div style="margin-top:20px; font-size:0.8rem;">COMING SOON</div>
            </div>
        </div>
    </div>

    <div id="app-modal">
        <div class="modal-body">
            <button class="close-btn" id="close-modal">&times;</button>
            <h2 style="margin-top:0; color:white;">EasyPay Contract</h2>
            <p style="color:#888; margin-bottom:30px;">Enter transaction details below. Logic auto-adjusts for Phones vs Watches.</p>

            <div class="row">
                <div class="field">
                    <label>Full Name</label>
                    <input type="text" id="con-name" class="modal-input" placeholder="Customer Name">
                </div>
                <div class="field">
                    <label>Address</label>
                    <input type="text" id="con-address" class="modal-input" placeholder="123 Street Address">
                </div>
            </div>

            <div class="row">
                <div class="field"><label>City</label><input type="text" id="con-city" class="modal-input" placeholder="City"></div>
                <div class="field"><label>State</label><input type="text" id="con-state" class="modal-input" placeholder="WA"></div>
                <div class="field"><label>Zip</label><input type="text" id="con-zip" class="modal-input" placeholder="Zip"></div>
            </div>

            <div class="row">
                <div class="field"><label>Account #</label><input type="text" id="con-acct" class="modal-input" placeholder="Account Number"></div>
                <div class="field"><label>Phone #</label><input type="text" id="con-phone" class="modal-input" placeholder="(555) 555-5555"></div>
            </div>

            <hr style="border-color:#333; margin: 30px 0;">

            <div class="row">
                <div class="field">
                    <label>Device Name</label>
                    <input type="text" id="con-item" class="modal-input" placeholder="e.g. iPhone 17">
                </div>
                <div class="field">
                    <label>SKU (First 6)</label>
                    <div style="display:flex;">
                        <input type="text" id="con-sku" class="modal-input" placeholder="123456" maxlength="6" style="border-radius:8px 0 0 8px;">
                        <span style="background:#333; color:#888; padding:12px; display:flex; align-items:center; border:1px solid #333; border-radius:0 8px 8px 0;">236</span>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="field">
                    <label>Retail Price ($)</label>
                    <input type="number" id="con-price" class="modal-input" placeholder="0.00" step="0.01">
                </div>
                <div class="field">
                    <label>Type</label>
                    <div class="btn-group">
                        <div class="toggle-opt active" id="mode-phone">Phone</div>
                        <div class="toggle-opt" id="mode-watch">Watch</div>
                    </div>
                </div>
            </div>

            <div class="math-box">
                <div class="math-row"><span>Sales Tax (8.9%)</span><span id="disp-tax">$0.00</span></div>
                <div class="math-row"><span>Down Payment</span><span id="disp-down">$0.00</span></div>
                <div class="math-row"><span>Monthly (24mo)</span><span id="disp-monthly">$0.00</span></div>
                <div class="math-row math-total"><span>Total Due Today</span><span id="con-due-today">$0.00</span></div>
            </div>

            <button id="generate-btn" class="primary-btn" style="margin-top:20px;">Generate PDF Contract</button>
        </div>
    </div>

<script>
    // --- CLOCK ---
    function updateClock() {
        const now = new Date();
        document.getElementById('live-clock').innerText = now.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit' });
    }
    setInterval(updateClock, 1000);
    updateClock();

    // --- LOGIN ---
    const loginForm = document.getElementById('login-form');
    const passInput = document.getElementById('password-input');
    const loginScreen = document.getElementById('login-screen');
    const dashboard = document.getElementById('dashboard');
    const errorMsg = document.getElementById('login-error');

    loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        if(passInput.value.toLowerCase() === "spokanecc") {
            loginScreen.style.opacity = '0';
            setTimeout(() => {
                loginScreen.style.display = 'none';
                dashboard.style.display = 'flex';
            }, 500);
        } else {
            errorMsg.style.display = 'block';
            passInput.value = '';
        }
    });

    document.getElementById('logout-btn').addEventListener('click', () => location.reload());

    // --- MODAL ---
    const modal = document.getElementById('app-modal');
    document.getElementById('open-contract').addEventListener('click', () => modal.style.display = 'flex');
    document.getElementById('close-modal').addEventListener('click', () => modal.style.display = 'none');

    // --- APP LOGIC ---
    const modePhone = document.getElementById('mode-phone');
    const modeWatch = document.getElementById('mode-watch');
    const priceInput = document.getElementById('con-price');
    let isPhone = true;

    modePhone.addEventListener('click', () => { isPhone = true; modePhone.classList.add('active'); modeWatch.classList.remove('active'); updateMath(); });
    modeWatch.addEventListener('click', () => { isPhone = false; modeWatch.classList.add('active'); modePhone.classList.remove('active'); updateMath(); });
    priceInput.addEventListener('input', updateMath);

    // Phone Format
    document.getElementById('con-phone').addEventListener('input', function (e) {
        let x = e.target.value.replace(/\D/g, '').match(/(\d{0,3})(\d{0,3})(\d{0,4})/);
        e.target.value = !x[2] ? x[1] : '(' + x[1] + ') ' + x[2] + (x[3] ? '-' + x[3] : '');
    });

    function getMath() {
        const price = parseFloat(priceInput.value) || 0;
        const tax = price * 0.089;
        let monthly = 0, down = 0, financed = 0;

        if (price > 0) {
            if (isPhone) {
                monthly = Math.floor(price / 24);
                down = price - (monthly * 24);
                financed = monthly * 24;
            } else {
                monthly = Math.ceil((price / 24) * 100) / 100;
                down = 0;
                financed = price; 
            }
        }
        return { price, tax, down, monthly, totalDue: down + tax, financed, totalPayments: monthly * 24, totalSalePrice: down + (monthly * 24) };
    }

    function updateMath() {
        const m = getMath();
        document.getElementById('disp-tax').innerText = "$" + m.tax.toFixed(2);
        document.getElementById('disp-down').innerText = "$" + m.down.toFixed(2);
        document.getElementById('disp-monthly').innerText = "$" + m.monthly.toFixed(2);
        document.getElementById('con-due-today').innerText = "$" + m.totalDue.toFixed(2);
    }

    // --- PDF GENERATOR (V3.10.0 EXACT MATCH) ---
    document.getElementById('generate-btn').addEventListener('click', () => {
        const m = getMath();
        const name = document.getElementById('con-name').value || "";
        const address = document.getElementById('con-address').value || "";
        const city = document.getElementById('con-city').value || "";
        const state = document.getElementById('con-state').value || "";
        const zip = document.getElementById('con-zip').value || "";
        const fullAddress = address + ", " + city + ", " + state + " " + zip;
        const acct = document.getElementById('con-acct').value || "";
        const phone = document.getElementById('con-phone').value || "";
        const item = document.getElementById('con-item').value || "";
        const sku = (document.getElementById('con-sku').value || "000000") + "236";
        const date = new Date().toLocaleDateString();

        const win = window.open('', '_blank');
        win.document.write(`
            <html>
            <head>
                <title>Installment Contract</title>
                <style>
                    @media print { body { margin: 0; padding: 25px; } .page-break { page-break-before: always; } }
                    body { font-family: Arial, sans-serif; padding: 40px; font-size: 12.5pt; line-height: 1.5; color: #000; }
                    table { width: 100%; border-collapse: collapse; margin-bottom: 25px; font-size: 12pt; }
                    td, th { border: 1px solid black; padding: 10px; vertical-align: top; text-align: left; }
                    .no-border td { border: none; padding: 6px; }
                    .bold { font-weight: bold; }
                    .small { font-size: 11pt; }
                    h3 { text-align: center; font-weight: bold; margin: 25px 0; font-size: 16pt; }
                </style>
            </head>
            <body>
                <div class="bold" style="font-size:14pt; margin-bottom:15px;">NOTICE TO CONSUMER</div>
                <div class="small">By signing below, you consent to receipt of the included contract and Truth-in-Lending disclosures... (Full Text Preserved)</div>
                <br>
                <table class="no-border" style="margin-bottom:40px;"><tr><td width="10%"><strong>DATE:</strong></td><td>${date}</td></tr><tr><td><strong>BUYER'S SIGNATURE:</strong></td><td>__________________________________________</td></tr></table>
                <h3>CONSUMER CREDIT INSTALLMENT SALE CONTRACT</h3>
                <table class="no-border" style="margin-bottom: 40px;"><tr><td width="50%"><strong>Seller/Creditor:</strong><br>Consumer Cellular<br>12447 SW 69th Avenue<br>Portland, OR 97223-8517</td><td><strong>Buyer:</strong><br>${name}<br>${fullAddress}<br>Account: ${acct}<br>Phone: ${phone}</td></tr></table>
                <table style="border: 2px solid black; margin-bottom:40px;"><tr style="background:#f0f0f0;"><th>SKU Number</th><th>Item Description</th><th>Price</th><th>Down payment Paid today</th><th>Balance</th></tr><tr><td>${sku}</td><td>${item}</td><td>$${m.price.toFixed(2)}</td><td>$${m.down.toFixed(2)}</td><td>$${m.financed.toFixed(2)}</td></tr></table>
                <div class="bold" style="margin-top:20px; font-size:14pt;">Federal Truth-in-Lending Disclosures</div>
                <table style="border: 2px solid black; margin-bottom:40px;"><tr style="background:#f0f0f0;"><th width="15%">ANNUAL % RATE</th><th width="15%">FINANCE CHARGE</th><th width="20%">Amount Financed</th><th width="20%">Total of Payments</th><th width="30%">Total Sale Price</th></tr><tr class="small" style="height: 60px;"><td>The cost of your credit as a yearly rate.</td><td>The dollar amount the credit will cost you.</td><td>The amount of credit provided to you or on your behalf.</td><td>The amount you will have paid after you have made all payments as scheduled.</td><td>The total cost of your purchase on credit, including your down payment of $${m.down.toFixed(2)}.</td></tr><tr class="bold" style="font-size:13pt;"><td>0%</td><td>$0.00</td><td>$${m.financed.toFixed(2)}</td><td>$${m.totalPayments.toFixed(2)}</td><td>$${m.totalSalePrice.toFixed(2)}</td></tr></table>
                <div style="margin-top:20px; font-size:13pt;"><strong>Your Payment Schedule will be:</strong></div>
                <table style="border: 2px solid black;"><tr style="background:#f0f0f0;"><th>SKU Number</th><th>Number of Payments</th><th>Amount of Payments</th><th>When Payments are Due</th></tr><tr><td>${sku}</td><td>24</td><td>$${m.monthly.toFixed(2)}</td><td>Monthly, beginning on Next Bill Cycle</td></tr></table>
                <div class="page-break"></div>
                <div style="margin-top:40px; font-weight: bold; font-size: 14pt;">Itemization of the Amount Financed of $${m.financed.toFixed(2)}</div>
                <table class="no-border" style="width:100%; margin-top: 20px; margin-bottom: 40px; font-size: 13pt;"><tr><td>Cash Price</td><td>$${m.price.toFixed(2)}</td></tr><tr><td>Sales Tax (8.9%)</td><td>$${m.tax.toFixed(2)}</td></tr><tr><td>Total Cash Price plus Sales Tax</td><td>$${(m.price + m.tax).toFixed(2)}</td></tr><tr><td>Cash Down payment</td><td>$${m.down.toFixed(2)}</td></tr><tr><td>Sales Tax paid at time of sale</td><td>$${m.tax.toFixed(2)}</td></tr><tr><td>Unpaid Balance of Cash Price/Unpaid Balance</td><td>$${m.financed.toFixed(2)}</td></tr><tr><td>Prepaid FINANCE CHARGE</td><td>$0.00</td></tr><tr><td style="border-top:2px solid black; padding-top: 15px;"><strong>Amount Financed</strong></td><td style="border-top:2px solid black; padding-top: 15px;"><strong>$${m.financed.toFixed(2)}</strong></td></tr></table>
                <div class="small" style="margin-top:30px; text-align:justify; line-height: 1.6;"><strong>Agreement to Purchase and Make Payments:</strong> The Buyer ("you" or "Buyer") agrees to purchase from the Seller... (Full Legal Text Preserved)</div>
                <br><br><br><table class="no-border"><tr><td width="50%"><strong>BUYER'S SIGNATURE:</strong></td><td><strong>SELLER'S SIGNATURE:</strong></td></tr><tr><td style="border-bottom:2px solid black; height:50px;"></td><td style="vertical-align:bottom;">CONSUMER CELLULAR, INCORPORATED</td></tr></table>
                <div class="page-break"></div>
                <br><br><br><div style="display: flex; flex-direction: column; justify-content: center; align-items: center; height: 50vh;"><div style="font-size: 24pt; font-weight: bold; font-family: Arial, sans-serif; text-align: center;">Account Number: <span style="font-weight:normal;">${acct}</span><br><br>Phone Number: <span style="font-weight:normal;">${phone}</span></div></div>
            </body>
            </html>
        `);
        win.document.close();
    });
</script>
</body>
</html>
