<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sales Portal V25.0 (Full Database)</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Playfair+Display:wght@700&family=Oswald:wght@500;700&display=swap" rel="stylesheet">
    <style>
        /* --- GLOBAL VARIABLES --- */
        :root {
            --sidebar-bg: rgba(255, 255, 255, 0.98);
            --header-bg: rgba(255, 255, 255, 0.95);
            --text-main: #0f172a;
            --text-light: #64748b;
            --primary: #0F2A4A; /* Official Navy */
            --accent: #F05820;  /* Official Orange */
            --border: #e2e8f0;
            --bg-grad-1: rgba(15, 42, 74, 0.4);
            --bg-grad-2: rgba(15, 42, 74, 0.6);
        }

        body { 
            font-family: 'Inter', sans-serif; 
            margin: 0; 
            color: var(--text-main); 
            height: 100vh; 
            overflow: hidden; 
            background: linear-gradient(var(--bg-grad-1), var(--bg-grad-2)), url('https://images.unsplash.com/photo-1436491865332-7a61a109cc05?q=80&w=2000&auto=format&fit=crop');
            background-size: cover; 
            background-position: center;
        }

        /* --- LOGIN OVERLAY --- */
        #login-view { 
            display: flex; flex-direction: column; justify-content: center; align-items: center; 
            width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: 9999; 
            background: linear-gradient(rgba(15, 42, 74, 0.9), rgba(15, 42, 74, 0.95)), url('https://images.unsplash.com/photo-1436491865332-7a61a109cc05?q=80&w=2000&auto=format&fit=crop');
            background-size: cover; 
            transition: opacity 0.5s ease;
        }

        .login-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 60px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            text-align: center;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
        }

        .login-title {
            color: white;
            font-family: 'Playfair Display', serif;
            font-size: 3.5rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 5px;
            margin-bottom: 40px;
            text-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }

        .login-input { 
            width: 350px; 
            background: transparent; 
            border: none; 
            border-bottom: 2px solid rgba(255, 255, 255, 0.5); 
            padding: 15px 0; 
            color: white; 
            font-size: 1.4rem; 
            outline: none; 
            margin-bottom: 40px; 
            text-align: center; 
            transition: 0.3s;
            font-family: 'Inter', sans-serif;
        }
        
        .login-input:focus { border-bottom-color: var(--accent); }
        
        .login-btn { 
            background-color: white; 
            color: var(--primary); 
            border: none; 
            padding: 18px 0; 
            width: 100%; 
            border-radius: 50px; 
            font-size: 1.1rem; 
            font-weight: 800; 
            letter-spacing: 2px; 
            cursor: pointer; 
            transition: transform 0.2s, box-shadow 0.2s; 
            text-transform: uppercase; 
        }
        
        .login-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }

        /* --- DASHBOARD LAYOUT --- */
        #dashboard-view { display: none; height: 100vh; width: 100%; }
        
        .sidebar { 
            width: 280px; 
            background-color: var(--sidebar-bg); 
            border-right: 1px solid var(--border); 
            display: flex; flex-direction: column; 
            padding: 25px; 
            box-sizing: border-box; 
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            backdrop-filter: blur(10px); 
            z-index: 100; 
        }
        
        .sidebar.collapsed { width: 90px; padding: 25px 15px; align-items: center; }
        .sidebar.collapsed .brand-text, .sidebar.collapsed .nav-text, .sidebar.collapsed .nav-section-label { display: none; }
        .sidebar.collapsed .brand { justify-content: center; }
        
        .brand { display: flex; align-items: center; gap: 15px; margin-bottom: 50px; font-weight: 800; font-size: 1.4rem; color: var(--primary); white-space: nowrap; overflow: hidden; letter-spacing: 1px; }
        .brand-icon { min-width: 44px; height: 44px; background: linear-gradient(135deg, var(--primary), var(--accent)); border-radius: 12px; color: white; display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 1.5rem; box-shadow: 0 4px 12px rgba(15, 42, 74, 0.3); }
        
        .nav-menu { list-style: none; padding: 0; margin: 0; flex: 1; width: 100%; }
        .nav-item { padding: 16px 20px; border-radius: 12px; color: var(--text-light); cursor: pointer; margin-bottom: 8px; display: flex; align-items: center; gap: 16px; font-size: 1rem; font-weight: 500; transition: all 0.2s; white-space: nowrap; overflow: hidden; }
        .nav-item:hover { background-color: var(--hover-bg); color: var(--text-main); transform: translateX(5px); }
        .nav-item.active { background-color: #eff6ff; color: var(--primary); font-weight: 700; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        
        .main-content { flex: 1; display: flex; flex-direction: column; overflow: hidden; position: relative; }
        
        .header { 
            height: 80px; 
            background: var(--header-bg); 
            border-bottom: 1px solid var(--border); 
            display: flex; align-items: center; justify-content: space-between; 
            padding: 0 40px; 
            backdrop-filter: blur(10px);
        }
        
        .header-clock { font-family: 'Oswald', sans-serif; font-size: 1.4rem; color: var(--primary); letter-spacing: 1px; font-weight: 500; }
        
        .scroll-area { flex: 1; overflow-y: auto; padding: 50px; scroll-behavior: smooth; }
        
        /* --- VIEWS --- */
        .view-section { display: none; animation: fadeIn 0.4s ease-out; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- CARDS --- */
        .card { 
            background: rgba(255, 255, 255, 0.99); 
            border-radius: 20px; 
            padding: 50px; 
            box-shadow: 0 20px 40px -10px rgba(0,0,0,0.1); 
            max-width: 1000px; 
            margin: 0 auto 50px; 
            border: 1px solid white; 
        }
        .card-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 40px; border-bottom: 2px solid var(--border); padding-bottom: 25px; }
        .card-title h2 { margin: 0 0 8px 0; font-size: 2rem; font-weight: 800; color: var(--primary); font-family: 'Oswald', sans-serif; text-transform: uppercase; letter-spacing: 1px; }
        .card-title p { margin: 0; color: var(--text-light); font-size: 1rem; }

        /* --- FORM ELEMENTS --- */
        .input-group { margin-bottom: 25px; }
        .label { display: block; margin-bottom: 10px; font-weight: 600; font-size: 0.9rem; color: var(--text-main); text-transform: uppercase; letter-spacing: 0.5px; }
        .input, .select { 
            width: 100%; padding: 15px; border: 1px solid var(--border); border-radius: 10px; 
            font-size: 1rem; box-sizing: border-box; transition: 0.2s; font-family: 'Inter', sans-serif; 
            background: #f8fafc;
        }
        .input:focus { border-color: var(--primary); background: white; outline: none; box-shadow: 0 0 0 4px rgba(15, 42, 74, 0.1); }
        
        .btn { padding: 14px 28px; border-radius: 10px; font-weight: 700; cursor: pointer; border: none; transition: 0.2s; font-size: 0.95rem; text-transform: uppercase; letter-spacing: 0.5px; }
        .btn-outline { background: white; border: 2px solid var(--border); color: var(--text-main); }
        .btn-outline:hover { background: var(--hover-bg); border-color: var(--text-light); }
        .btn-primary { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(15, 42, 74, 0.2); }
        .btn-primary:hover { background: #153860; transform: translateY(-2px); box-shadow: 0 6px 20px rgba(15, 42, 74, 0.3); }

        /* --- SPECIFIC TOOLS --- */
        /* Bill Estimator Navy Banner */
        .bill-sec-title { 
            background-color: var(--primary); color: white; 
            padding: 10px 40px 10px 20px; font-weight: 800; text-transform: uppercase; 
            margin-bottom: 20px; font-size: 0.9rem; width: fit-content; min-width: 200px;
            clip-path: polygon(0% 0%, 90% 0%, 100% 50%, 90% 100%, 0% 100%); 
            box-shadow: 2px 2px 10px rgba(0,0,0,0.1);
        }
        .bill-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; padding-bottom: 12px; border-bottom: 1px dashed var(--border); }
        .bill-total-bar { 
            background-color: var(--primary); color: white; 
            padding: 15px 30px 15px 20px; font-weight: 700; display: flex; justify-content: space-between; 
            clip-path: polygon(0% 0%, 96% 0%, 100% 50%, 96% 100%, 0% 100%); margin-top: 20px; font-size: 1.2rem;
        }

        /* Lists */
        .list-container { border: 1px solid var(--border); border-radius: 12px; overflow: hidden; background: white; }
        .list-item { padding: 20px; border-bottom: 1px solid var(--border); cursor: pointer; transition: 0.1s; }
        .list-item:hover { background-color: #f1f5f9; }
        .list-item:last-child { border-bottom: none; }
        .list-header { display: flex; justify-content: space-between; align-items: center; font-weight: 600; font-size: 1.05rem; }
        .list-detail { display: none; padding-top: 15px; margin-top: 15px; border-top: 1px solid #e2e8f0; font-size: 0.95rem; line-height: 1.6; color: #475569; white-space: pre-wrap; }
        .list-item.expanded .list-detail { display: block; }
        .list-item.expanded { background-color: #eff6ff; }
        
        /* EasyPay Calc */
        .ep-panel { background: #f0f9ff; border: 1px solid #bae6fd; border-radius: 12px; padding: 25px; margin-top: 20px; }
        .ep-row { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 1rem; color: #0c4a6e; }
        .ep-total { margin-top: 15px; padding-top: 15px; border-top: 2px solid white; font-weight: 800; font-size: 1.4rem; display: flex; justify-content: space-between; color: #0284c7; }

        /* Modal */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 5000; display: none; align-items: center; justify-content: center; backdrop-filter: blur(8px); }
        .modal-box { background: white; width: 550px; padding: 50px; border-radius: 20px; text-align: center; border-bottom: 8px solid var(--accent); box-shadow: 0 20px 60px rgba(0,0,0,0.4); }
    </style>
</head>
<body>

    <div id="login-view">
        <div class="login-card">
            <div class="login-title">SALES PORTAL</div>
            <form id="login-form">
                <input type="password" id="password-input" class="login-input" placeholder="ACCESS CODE">
                <br>
                <button type="submit" class="login-btn">AUTHENTICATE</button>
            </form>
            <div id="login-error" style="color:#fca5a5; margin-top:20px; display:none; font-weight:600;">INVALID CREDENTIALS</div>
        </div>
    </div>

    <div id="dashboard-view">
        
        <div class="sidebar collapsed" id="app-sidebar">
            <div class="brand"><div class="brand-icon">S</div>SALES DASHBOARD</div>
            <ul class="nav-menu">
                <li class="nav-item active" onclick="switchView('view-home')"><span style="font-size:1.4rem;">üè†</span> <span class="nav-text">Home</span></li>
                <li class="nav-item" onclick="switchView('view-calc')"><span style="font-size:1.4rem;">üßÆ</span> <span class="nav-text">EasyPay Calc</span></li>
                <li class="nav-item" onclick="switchView('view-estimator')"><span style="font-size:1.4rem;">üìä</span> <span class="nav-text">Plan Estimator</span></li>
                <li class="nav-item" onclick="switchView('view-bill')"><span style="font-size:1.4rem;">üßæ</span> <span class="nav-text">Bill Estimator</span></li>
                <li class="nav-item" onclick="switchView('view-contract')"><span style="font-size:1.4rem;">üìù</span> <span class="nav-text">Contract Gen</span></li>
                <li class="nav-item" onclick="switchView('view-troubleshoot')"><span style="font-size:1.4rem;">üîß</span> <span class="nav-text">Quick Fix</span></li>
                <li class="nav-item" onclick="switchView('view-porting')"><span style="font-size:1.4rem;">üìû</span> <span class="nav-text">Porting Info</span></li>
                <li class="nav-item" onclick="location.reload()" style="margin-top:auto;"><span style="font-size:1.4rem;">üö™</span> <span class="nav-text">Log Out</span></li>
            </ul>
        </div>

        <div class="main-content">
            <div class="header">
                <div onclick="document.getElementById('app-sidebar').classList.toggle('collapsed')" style="cursor:pointer; font-size:1.5rem; color:var(--primary);">‚ò∞</div>
                <div class="header-clock" id="live-clock"></div>
            </div>
            
            <div class="scroll-area">
                
                <div id="view-home" class="view-section active">
                    </div>

                <div id="view-calc" class="view-section">
                    <div class="card" style="max-width:600px;">
                        <div class="card-header"><div class="card-title"><h2>EasyPay Calculator</h2><p>Check down payments and installments.</p></div></div>
                        <label class="label">Device Retail Price ($)</label>
                        <input type="number" id="quick-price" class="input" placeholder="0.00" oninput="runQuickCalc()">
                        <div style="display:flex; gap:30px; margin:20px 0;">
                            <label style="display:flex; align-items:center; gap:10px; font-weight:600;"><input type="radio" name="quickType" id="q-phone" checked onchange="runQuickCalc()"> Smartphone</label>
                            <label style="display:flex; align-items:center; gap:10px; font-weight:600;"><input type="radio" name="quickType" id="q-watch" onchange="runQuickCalc()"> Smartwatch</label>
                        </div>
                        <div class="ep-panel">
                            <div class="ep-row"><span>Estimated Sales Tax (8.9%)</span><span id="q-tax" style="font-weight:700;">$0.00</span></div>
                            <div class="ep-row"><span>Required Down Payment</span><span id="q-down" style="font-weight:700;">$0.00</span></div>
                            <div class="ep-row"><span>Monthly Installment (24mo)</span><span id="q-mo" style="font-weight:700;">$0.00</span></div>
                            <div class="ep-total"><span>TOTAL DUE TODAY</span><span id="q-tot">$0.00</span></div>
                        </div>
                    </div>
                </div>

                <div id="view-bill" class="view-section">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title"><h2>First Bill Estimator</h2><p>Calculate and print estimated charges.</p></div>
                            <button class="btn btn-primary" onclick="printBill()">Generate PDF</button>
                        </div>
                        <div class="bill-section">
                            <div class="bill-sec-title">Monthly Rate Plan</div>
                            <div class="bill-row"><span>Base Plan</span><select id="be-plan" class="input" style="width:250px;" onchange="runBill()"></select></div>
                            <div class="bill-row"><span>Number of Lines</span><input type="number" id="be-lines" class="input" style="width:80px;" value="1" min="1" max="7" oninput="runBill()"></div>
                            <div class="bill-row"><span>Apply 5% AARP Discount</span><input type="checkbox" id="be-aarp" style="width:20px; height:20px;" onchange="runBill()"></div>
                            <div class="bill-total-bar"><span>ESTIMATED MONTHLY TOTAL</span><span id="be-total" style="font-size:1.5rem;">$0.00</span></div>
                        </div>
                    </div>
                </div>

                <div id="view-contract" class="view-section">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title"><h2>EasyPay Contract</h2><p>Generate compliant installment agreement.</p></div>
                            <button class="btn btn-primary" onclick="checkCon()">Print Agreement</button>
                        </div>
                        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:20px; margin-bottom:20px;">
                            <div><label class="label">Customer Full Name</label><input type="text" id="con-name" class="input"></div>
                            <div><label class="label">Account Number</label><input type="text" id="con-acct" class="input"></div>
                        </div>
                        <label class="label">Device Name / Model</label><input type="text" id="con-item" class="input" style="margin-bottom:20px;">
                        <label class="label">Retail Price ($)</label><input type="number" id="con-price" class="input" oninput="runConCalc()">
                        <div style="display:flex; gap:30px; margin:20px 0;">
                            <label style="display:flex; align-items:center; gap:10px; font-weight:600;"><input type="radio" name="conType" id="c-phone" checked onchange="runConCalc()"> Smartphone</label>
                            <label style="display:flex; align-items:center; gap:10px; font-weight:600;"><input type="radio" name="conType" id="c-watch" onchange="runConCalc()"> Smartwatch</label>
                        </div>
                        <div class="ep-panel">
                            <div class="ep-row"><span>Monthly Payment</span><span id="con-mo" style="font-weight:700;">$0.00</span></div>
                            <div class="ep-total"><span>DUE TODAY (Tax + Down)</span><span id="con-tot">$0.00</span></div>
                        </div>
                    </div>
                </div>

                <div id="view-troubleshoot" class="view-section">
                    <div class="card" style="max-width:1100px;">
                        <div class="card-header"><div class="card-title"><h2>Quick Fix Guides</h2><p>Troubleshooting steps for 30+ devices.</p></div></div>
                        <input type="text" id="ts-search" class="input" placeholder="Search devices (e.g. S25, Razr, iPhone 17)..." onkeyup="searchTS()">
                        <div class="ts-grid" id="ts-container" style="margin-top:30px;"></div>
                    </div>
                </div>

                <div id="view-porting" class="view-section">
                    <div class="card">
                        <div class="card-header"><div class="card-title"><h2>Porting Contacts</h2><p>Carrier rules and department numbers.</p></div></div>
                        <input type="text" id="port-search" class="input" placeholder="Search carrier name..." onkeyup="searchPort()">
                        <div class="list-container" style="margin-top:30px;">
                            <ul class="port-list" id="port-container"></ul>
                        </div>
                    </div>
                </div>
                
                 <div id="view-estimator" class="view-section">
                    <div class="card" style="max-width:1100px;">
                        <div class="card-header"><div class="card-title"><h2>Plan Estimator</h2></div></div>
                        <div style="display:flex; gap:30px;">
                            <div id="plan-list-cont" style="flex:1;"></div>
                            <div id="plan-detail-cont" class="ep-panel" style="flex:2; margin-top:0;">Select a plan to view details.</div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div id="hv-modal" class="modal-overlay">
        <div class="modal-box">
            <div style="font-size:60px; margin-bottom:20px;">‚ö†Ô∏è</div>
            <h2 style="color:var(--accent); margin-top:0;">HIGH VALUE APPROVAL</h2>
            <p style="font-size:1.2rem; line-height:1.6;">This transaction exceeds <strong>$700.00</strong>.</p>
            <p style="color:#64748b;">You must call <strong>CC EasyPay Credit (877-803-0176)</strong> for authorization before printing this agreement.</p>
            <button class="btn btn-primary" style="width:100%; padding:15px; margin-top:30px; font-size:1.1rem;" onclick="confirmCon()">I HAVE CALLED CREDIT</button>
            <div style="margin-top:20px; cursor:pointer; text-decoration:underline; color:#64748b;" onclick="document.getElementById('hv-modal').style.display='none'">Cancel</div>
        </div>
    </div><script>
    // --- 1. CORE AUTH & NAVIGATION ---
    const authPass = 'spokanecc';
    
    document.getElementById('login-form').onsubmit = (e) => {
        e.preventDefault();
        if(document.getElementById('password-input').value.toLowerCase() === authPass) {
            document.getElementById('login-view').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('login-view').style.display = 'none';
                document.getElementById('dashboard-view').style.display = 'flex';
                initData(); // Triggers Part 3 Data Loading
            }, 500);
        } else {
            document.getElementById('login-error').style.display = 'block';
        }
    };

    function switchView(id) {
        document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
    }

    setInterval(() => {
        const now = new Date();
        document.getElementById('live-clock').innerText = now.toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit' });
    }, 1000);

    // --- 2. EASYPAY MATHEMATICS ENGINE ---
    function getMath(price, isPhone) {
        price = parseFloat(price) || 0;
        const tax = price * 0.089;
        let monthly = 0, down = 0;
        
        if (price > 0) {
            if (isPhone) {
                // Phone Logic: Whole dollar monthly, remainder to down payment
                monthly = Math.floor(price / 24);
                down = price - (monthly * 24);
            } else {
                // Watch Logic: $0 down (usually), exact division rounded up for safety
                monthly = Math.ceil((price / 24) * 100) / 100;
                down = 0;
            }
        }
        return { tax, down, monthly, totalToday: down + tax };
    }

    // Calculator Tab Logic
    function runQuickCalc() {
        const m = getMath(document.getElementById('quick-price').value, document.getElementById('q-phone').checked);
        document.getElementById('q-tax').innerText = "$" + m.tax.toFixed(2);
        document.getElementById('q-down').innerText = "$" + m.down.toFixed(2);
        document.getElementById('q-mo').innerText = "$" + m.monthly.toFixed(2);
        document.getElementById('q-tot').innerText = "$" + m.totalToday.toFixed(2);
    }

    // Contract Tab Logic
    function runConCalc() {
        const m = getMath(document.getElementById('con-price').value, document.getElementById('c-phone').checked);
        document.getElementById('con-mo').innerText = "$" + m.monthly.toFixed(2);
        document.getElementById('con-tot').innerText = "$" + m.totalToday.toFixed(2);
    }

    // --- 3. CONTRACT & HIGH VALUE LOGIC ---
    function checkContract() {
        const p = parseFloat(document.getElementById('con-price').value) || 0;
        if(p > 700.00) {
            document.getElementById('hv-modal').style.display = 'flex';
        } else {
            printContract();
        }
    }

    function confirmCon() {
        document.getElementById('hv-modal').style.display = 'none';
        printContract();
    }

    function printContract() {
        const name = document.getElementById('con-name').value || "Customer";
        const acct = document.getElementById('con-acct').value || "N/A";
        const dev = document.getElementById('con-item').value || "Device";
        const m = getMath(document.getElementById('con-price').value, document.getElementById('c-phone').checked);
        
        const win = window.open('', '_blank');
        win.document.write(`
            <html><head><title>EasyPay Agreement</title><style>
                body { font-family: Arial, sans-serif; padding: 40px; line-height: 1.6; }
                h1 { text-align: center; text-transform: uppercase; border-bottom: 2px solid #000; padding-bottom: 20px; }
                .box { border: 1px solid #ccc; padding: 20px; margin-bottom: 20px; }
                .row { display: flex; justify-content: space-between; margin-bottom: 10px; }
                .bold { font-weight: bold; }
                .sig-line { margin-top: 50px; border-top: 1px solid #000; width: 100%; padding-top: 10px; }
            </style></head><body>
                <h1>Retail Installment Agreement</h1>
                <div class="box">
                    <div class="row"><span class="bold">Customer Name:</span><span>${name}</span></div>
                    <div class="row"><span class="bold">Account Number:</span><span>${acct}</span></div>
                    <div class="row"><span class="bold">Date:</span><span>${new Date().toLocaleDateString()}</span></div>
                </div>
                <h3>Transaction Details</h3>
                <div class="box">
                    <div class="row"><span class="bold">Device:</span><span>${dev}</span></div>
                    <div class="row"><span class="bold">Monthly Payment (24mo):</span><span>$${m.monthly.toFixed(2)}</span></div>
                    <div class="row"><span class="bold">Down Payment:</span><span>$${m.down.toFixed(2)}</span></div>
                    <div class="row"><span class="bold">Sales Tax:</span><span>$${m.tax.toFixed(2)}</span></div>
                    <div class="row" style="font-size:1.2em; font-weight:bold; border-top:2px solid #000; padding-top:10px; margin-top:10px;">
                        <span>TOTAL DUE TODAY:</span><span>$${m.totalToday.toFixed(2)}</span>
                    </div>
                </div>
                <p>By signing below, I agree to the terms of the EasyPay installment plan.</p>
                <div style="margin-top:60px;">
                    <div class="sig-line">Customer Signature</div>
                </div>
                <div style="margin-top:40px;">
                    <div class="sig-line">Employee Signature</div>
                </div>
            <script>window.print();<\/script></body></html>
        `);
        win.document.close();
    }
</script><script>
    // --- 4. DATA LOADER ---
    
    // -- BILL ESTIMATOR DATA --
    const plans = [
        {name:"The Minimalist (1GB)", price:20, family:"connect", desc:"Basic use. Calling & Texting."},
        {name:"The Sometimes-On (5GB)", price:25, family:"connect", desc:"Light social media & maps."},
        {name:"The Scroller (10GB)", price:35, family:"connect", desc:"Daily smartphone usage."},
        {name:"The Streamer (20GB)", price:45, family:"connect", desc:"Video & Music streaming."},
        {name:"Unlimited", price:60, family:"unlimited", desc:"No worries about data caps."},
        {name:"Unlimited 50+", price:40, family:"50plus", desc:"Special rate for 1 Line (55+)."},
        {name:"Unlimited AARP", price:55, family:"50plus", desc:"2 Lines Required (AARP Member)."}
    ];

    function runBill() {
        const plan = plans[document.getElementById('be-plan').value];
        const lines = parseInt(document.getElementById('be-lines').value) || 1;
        let total = plan.price;
        
        // Add Line Logic
        if(plan.name.includes("AARP")) {
            if(lines > 2) total += (lines - 2) * 20; // AARP starts at 2 lines for $55, add'l are $20
        } else if (plan.family === 'connect') {
            if(lines > 1) total += (lines - 1) * 15;
        } else if (plan.family === 'unlimited' || plan.family === '50plus') {
            if(lines > 1) total += (lines - 1) * 20;
        }

        // Discount Logic
        if(document.getElementById('be-aarp').checked && !plan.name.includes("AARP")) {
            total = total * 0.95;
        }

        document.getElementById('be-total').innerText = "$" + total.toFixed(2);
        return total.toFixed(2);
    }

    function printBill() {
        const val = runBill();
        const win = window.open('', '_blank');
        win.document.write(`<html><head><style>@import url('https://fonts.googleapis.com/css2?family=Oswald:wght@700&display=swap');body{padding:0;margin:0;font-family:sans-serif;color:#0F2A4A}.head{background:#0F2A4A;color:white;padding:30px;display:flex;justify-content:space-between;align-items:center}.logo{background:#F05820;padding:10px;color:white;font-weight:bold}.arr{background:#0F2A4A;color:white;padding:10px 40px;margin:40px;width:fit-content;clip-path:polygon(0% 0%,90% 0%,100% 50%,90% 100%,0% 100%);font-weight:bold;font-size:1.2rem}.tot{border:4px solid #0F2A4A;margin:40px;padding:30px;display:flex;justify-content:space-between;font-size:2rem;font-weight:800}</style></head><body><div class="head"><h1>ESTIMATED FIRST BILL</h1><div class="logo">Consumer Cellular</div></div><div class="arr">MONTHLY RATE PLAN</div><div class="tot"><span>GRAND TOTAL</span><span>$${val}</span></div><script>window.print()<\/script></body></html>`);
        win.document.close();
    }

    // -- FULL PORTING DATABASE (100+ CARRIERS) --
    const carriers = [
        {n:"Verizon Wireless", p:"Number Transfer PIN via #PORT (Call #7678). Valid 7 days."},
        {n:"AT&T Wireless", p:"Port-out PIN via *PORT (Call *7678). Valid 4 days."},
        {n:"T-Mobile", p:"NTP via T-Mobile App > Account > Line Settings. Or Account Hub."},
        {n:"Straight Talk", p:"Text NTP to 611611. PIN is often dynamic."},
        {n:"Tracfone", p:"Text NTP to 611611. Account # is usually IMEI/SIM."},
        {n:"Spectrum Mobile", p:"Account PIN found on Page 1 of Bill (PDF)."},
        {n:"Xfinity Mobile", p:"Request NTP via Xfinity App > Devices > Transfer."},
        {n:"Cricket Wireless", p:"NTP via myCricket App or *PORT."},
        {n:"Boost Mobile", p:"Call 611 or Port Department for PIN."},
        {n:"Mint Mobile", p:"Request via App > Account > Port Out."},
        {n:"Google Fi", p:"Unlock number via Fi App (gives Acct & PIN)."},
        {n:"Lively / Jitterbug", p:"Call Customer Service for alphanumeric PIN."},
        {n:"US Cellular", p:"Call Port Department. PIN is often 4-digit security code."},
        {n:"Consumer Cellular", p:"Last 4 of Primary SSN (Default)."},
        {n:"Metro by T-Mobile", p:"PIN in MyMetro App (Profile/Account)."},
        {n:"Visible", p:"Request Port PIN via App > Account > Privacy."},
        {n:"PureTalk", p:"Call Customer Service to release number."},
        {n:"Red Pocket", p:"Available in Online Account Dashboard."},
        {n:"Simple Mobile", p:"Text NTP to 611611."},
        {n:"Total Wireless", p:"Text NTP to 611611."},
        {n:"Net10", p:"Text NTP to 611611."},
        {n:"Page Plus", p:"Text NTP to 611611."},
        {n:"Walmart Family Mobile", p:"Text NTP to 611611."},
        {n:"SafeLink", p:"Enrollment ID is often Account #. Call for PIN."},
        {n:"Assurance Wireless", p:"6-digit PIN found in Account Settings."},
        {n:"H2O Wireless", p:"Call Customer Service for Port PIN."},
        {n:"Lyca Mobile", p:"Call CS for PAC code."},
        {n:"Ultra Mobile", p:"Call CS for Account/PIN."},
        {n:"Republic Wireless", p:"Online Account Portal."},
        {n:"Tello", p:"Online Account Dashboard."},
        {n:"Twigby", p:"Online Account Dashboard (Chat only support)."},
        {n:"US Mobile", p:"Online Dashboard > Line > Port Out."},
        {n:"Wing", p:"Call Customer Service."},
        {n:"Q Link Wireless", p:"Online Account."},
        {n:"Access Wireless", p:"Call Customer Service."},
        {n:"Airvoice Wireless", p:"Call Customer Service."},
        {n:"Gen Mobile", p:"Call Customer Service."},
        {n:"Good2Go Mobile", p:"Online Account."},
        {n:"GreatCall", p:"Call CS (See Lively)."},
        {n:"Hello Mobile", p:"Online Account."},
        {n:"Patriot Mobile", p:"Online or Call CS."},
        {n:"Selectel", p:"Call Customer Service."},
        {n:"Reach Mobile", p:"Call Customer Service."},
        {n:"Pix Wireless", p:"Online Account."},
        {n:"Ting", p:"Online Settings > Port Out info."},
        {n:"Credo Mobile", p:"Text ACCOUNT to 27336."},
        {n:"Flash Wireless", p:"Online Account."},
        {n:"Family Mobile", p:"Text NTP to 611611."},
        {n:"Boom Mobile", p:"Call Customer Service."},
        {n:"Boss Wireless", p:"Call Customer Service."},
        {n:"Black Wireless", p:"Call Customer Service."},
        {n:"Cellcom", p:"Call Customer Service."},
        {n:"Carolina West", p:"Call Customer Service."},
        {n:"C-Spire", p:"Call Customer Service."},
        {n:"Inland Cellular", p:"Call Customer Service."},
        {n:"Nex-Tech", p:"Call Customer Service."},
        {n:"Pine Cellular", p:"Call Customer Service."},
        {n:"Pioneer Cellular", p:"Call Customer Service."},
        {n:"Union Wireless", p:"Call Customer Service."},
        {n:"Viaero", p:"Call Customer Service."},
        {n:"West Central", p:"Call Customer Service."},
        {n:"Appalachian Wireless", p:"Call Customer Service."},
        {n:"Bluegrass Cellular", p:"Call Customer Service."},
        {n:"Chat Mobility", p:"Call Customer Service."},
        {n:"Copper Valley", p:"Call Customer Service."},
        {n:"GCI", p:"Call Customer Service."},
        {n:"Illinois Valley", p:"Call Customer Service."},
        {n:"James Valley", p:"Call Customer Service."},
        {n:"Nemont", p:"Call Customer Service."},
        {n:"NorthwestCell", p:"Call Customer Service."},
        {n:"Panhandle", p:"Call Customer Service."},
        {n:"Silver Star", p:"Call Customer Service."},
        {n:"Snake River", p:"Call Customer Service."},
        {n:"STRATA", p:"Call Customer Service."},
        {n:"Syringa", p:"Call Customer Service."},
        {n:"Thumb Cellular", p:"Call Customer Service."},
        {n:"United Wireless", p:"Call Customer Service."},
        {n:"Bravado", p:"Call Customer Service."},
        {n:"Altice Mobile", p:"Call Customer Service."},
        {n:"Optimum Mobile", p:"Call Customer Service."},
        {n:"Cox Mobile", p:"Call Customer Service."},
        {n:"TextNow", p:"Email support often required for Port Out info."},
        {n:"FreedomPop", p:"Online Account > Port Out."},
        {n:"Unreal Mobile", p:"Online Account."}
    ];

    // -- FULL TROUBLESHOOTING DATABASE (31+ DEVICES) --
    const tsGuides = [
        {t:"iPhone 17 Pro Max", c:"1. Cellular Fix: Settings > Cellular > Toggle Plan Off/On after 30s.\n2. Network Reset: Settings > General > Transfer or Reset > Reset Network Settings.\n3. VoiceOver: Tap once to select, double-tap to activate/off."},
        {t:"iPhone 17 Pro", c:"1. Display lag: Verify Low Power Mode is Off.\n2. Force Restart: Up Vol, Down Vol, Hold Power.\n3. Reset All Settings."},
        {t:"iPhone 17 Air", c:"1. Battery: Check Background App Refresh.\n2. Connection: Cycle Airplane Mode 10s.\n3. Update Carrier Settings."},
        {t:"iPhone 17", c:"1. Cellular: Toggle Main Plan.\n2. Reseat SIM.\n3. Clear Safari Cache."},
        {t:"iPhone 16 Series", c:"1. Network Reset.\n2. SIM Pull (Physical).\n3. Soft Reset."},
        {t:"iPhone 15 Series", c:"1. Force Restart.\n2. Check Carrier Update.\n3. Toggle 5G Auto."},
        {t:"iPhone SE (3rd Gen)", c:"1. Toggle Home Button Haptics.\n2. Network Reset.\n3. Reseat SIM."},
        {t:"Samsung S25 Ultra", c:"1. Safe Mode: Restart + Hold Vol Down.\n2. Wipe Cache Partition in Recovery.\n3. Toggle eSIM."},
        {t:"Samsung S25 FE", c:"1. App Crash: Clear Cache in App Info.\n2. Device Care: Run Optimizer."},
        {t:"Samsung S25 Edge", c:"1. Screen: Recalibrate Touch Sensitivity.\n2. Edge Panel: Toggle Off."},
        {t:"Samsung S25", c:"1. eSIM: Toggle Plan in Connections.\n2. System UI: Force Stop."},
        {t:"Galaxy Z Fold 7", c:"1. Hinge: Open/Close 3x quickly.\n2. Screen: Clean inner display with microfiber only.\n3. Soft Reset."},
        {t:"Galaxy Z Flip 7 FE", c:"1. Cover Screen: Remove widgets and add back 1 by 1.\n2. Camera Shutter lag: Turn off Scene Optimizer."},
        {t:"Galaxy A15 (Physical SIM)", c:"1. Network: Turn off, remove SIM for 60s, reinsert, turn on.\n2. TalkBack: Settings > Accessibility > TalkBack > OFF."},
        {t:"Galaxy A36 5G (eSIM)", c:"1. Network: Settings > Connections > SIM manager > Toggle eSIM.\n2. RAM Plus: Lower the value in Battery/Device Care."},
        {t:"Galaxy A16", c:"1. SD Card: Unmount/Remount.\n2. Safe Mode check."},
        {t:"Galaxy Tab A11", c:"1. Multi-User: Switch profiles and back to clear glitches.\n2. Dex Mode: Toggle."},
        {t:"Moto Razr 2025", c:"1. Connection: Settings > Network > Internet > Toggle Mobile Data.\n2. Proximity: Clean cover screen sensor area."},
        {t:"Moto Razr 2024", c:"1. Audio: Reset Dolby Atmos.\n2. Peek Display: Toggle Off/On."},
        {t:"Moto G Power 2025", c:"1. Battery Saver: Ensure main saver mode is off.\n2. Fingerprint: Delete and re-register fingerprint if failing."},
        {t:"Moto G Stylus 2025", c:"1. Stylus: Remove and re-insert firmly.\n2. Screen Record: Force stop service in Apps if notification sticks."},
        {t:"Moto G Play 2024", c:"1. SIM: Pull and clean.\n2. Reboot."},
        {t:"Moto Edge 2024", c:"1. Edge Touch: Adjust prevention zone.\n2. ReadyFor: Reset connection."},
        {t:"Google Pixel 10", c:"1. Connectivity: Disable Adaptive Connectivity.\n2. Reset Wi-Fi/BT."},
        {t:"Google Pixel 9", c:"1. Screen Call: Toggle settings.\n2. Network Reset."},
        {t:"Iris Eazy Flip", c:"1. T9: Cycle # key.\n2. Contrast: Set Max.\n3. Volume: Check side keys."},
        {t:"Verve Home Base", c:"1. Power: Unplug 2 mins.\n2. Antenna: Rotate 90deg.\n3. Signal: Move to window."},
        {t:"Iris Home Base", c:"1. Display: Check for error code.\n2. Power Cycle."},
        {t:"Iris Ally", c:"1. SOS: Test call.\n2. Cradle: Check green light."},
        {t:"Apple Watch Ultra 3", c:"1. Action Button: Check assignment.\n2. Water Lock: Toggle."},
        {t:"Apple Watch Series 11", c:"1. Crown: Clean and press.\n2. Unpair/Re-pair."},
        {t:"Apple Watch SE", c:"1. Haptics: Check silent mode."}
    ];

    // --- 5. INITIALIZATION ---
    function initData() {
        // Plans
        const pSel = document.getElementById('be-plan');
        plans.forEach((p, i) => { const opt = document.createElement('option'); opt.value = i; opt.text = `${p.name} ($${p.price})`; pSel.appendChild(opt); });
        
        // Plan List
        const plList = document.getElementById('plan-list-cont');
        plans.forEach((p,i) => { let d = document.createElement('div'); d.className='list-item'; d.innerText=p.name; d.onclick=()=>showPlan(i); plList.appendChild(d); });

        // Troubleshooting
        const tc = document.getElementById('ts-container');
        tsGuides.forEach(g => {
            const el = document.createElement('div'); el.className = 'ts-card';
            el.innerHTML = `<div class="ts-name">${g.t}</div><div class="ts-details">${g.c}</div><button class="btn-primary" style="font-size:0.8rem; padding:8px 15px;" onclick="printTS('${g.t}')">Print Guide</button>`;
            tc.appendChild(el);
        });

        // Carriers
        const pc = document.getElementById('port-container');
        carriers.sort((a,b)=>a.n.localeCompare(b.n)).forEach(c => {
            const el = document.createElement('li'); el.className = 'list-item';
            el.onclick = function() { this.classList.toggle('expanded'); };
            el.innerHTML = `<div class="list-header"><span>${c.n}</span></div><div class="list-detail">${c.p}</div>`;
            pc.appendChild(el);
        });
        runBill();
    }

    function showPlan(i) {
        let p = plans[i];
        document.getElementById('plan-detail-cont').innerHTML = `<h3>${p.name}</h3><div style="font-size:2rem; color:var(--accent); font-weight:800;">$${p.price}/mo</div><p>${p.desc}</p>`;
    }

    function searchTS() {
        const q = document.getElementById('ts-search').value.toLowerCase();
        document.querySelectorAll('.ts-card').forEach(c => c.style.display = c.innerText.toLowerCase().includes(q) ? 'flex' : 'none');
    }

    function searchPort() {
        const q = document.getElementById('port-search').value.toLowerCase();
        document.querySelectorAll('#port-container .list-item').forEach(i => i.style.display = i.innerText.toLowerCase().includes(q) ? 'block' : 'none');
    }

    function printTS(title) {
        const g = tsGuides.find(x => x.t === title);
        const win = window.open('', '_blank');
        win.document.write(`<html><head><style>body{font-family:sans-serif; padding:40px; color:#0F2A4A;} h1{border-bottom:5px solid #F05820; padding-bottom:10px;}</style></head><body><h1>${g.t} Quick Guide</h1><pre style="font-size:1.3rem; white-space:pre-wrap;">${g.c}</pre><script>window.print();<\/script></body></html>`);
        win.document.close();
    }
    
    function printPlan() {
        // Simple print for current selected plan
        window.print(); 
    }
</script>
</body>
</html><script>
    // --- 4. DATA LOADER ---
    
    // -- BILL ESTIMATOR DATA --
    const plans = [
        {name:"The Minimalist (1GB)", price:20, family:"connect", desc:"Basic use. Calling & Texting."},
        {name:"The Sometimes-On (5GB)", price:25, family:"connect", desc:"Light social media & maps."},
        {name:"The Scroller (10GB)", price:35, family:"connect", desc:"Daily smartphone usage."},
        {name:"The Streamer (20GB)", price:45, family:"connect", desc:"Video & Music streaming."},
        {name:"Unlimited", price:60, family:"unlimited", desc:"No worries about data caps."},
        {name:"Unlimited 50+", price:40, family:"50plus", desc:"Special rate for 1 Line (55+)."},
        {name:"Unlimited AARP", price:55, family:"50plus", desc:"2 Lines Required (AARP Member)."}
    ];

    function runBill() {
        const plan = plans[document.getElementById('be-plan').value];
        const lines = parseInt(document.getElementById('be-lines').value) || 1;
        let total = plan.price;
        
        // Add Line Logic
        if(plan.name.includes("AARP")) {
            if(lines > 2) total += (lines - 2) * 20; // AARP starts at 2 lines for $55, add'l are $20
        } else if (plan.family === 'connect') {
            if(lines > 1) total += (lines - 1) * 15;
        } else if (plan.family === 'unlimited' || plan.family === '50plus') {
            if(lines > 1) total += (lines - 1) * 20;
        }

        // Discount Logic
        if(document.getElementById('be-aarp').checked && !plan.name.includes("AARP")) {
            total = total * 0.95;
        }

        document.getElementById('be-total').innerText = "$" + total.toFixed(2);
        return total.toFixed(2);
    }

    function printBill() {
        const val = runBill();
        const win = window.open('', '_blank');
        win.document.write(`<html><head><style>@import url('https://fonts.googleapis.com/css2?family=Oswald:wght@700&display=swap');body{padding:0;margin:0;font-family:sans-serif;color:#0F2A4A}.head{background:#0F2A4A;color:white;padding:30px;display:flex;justify-content:space-between;align-items:center}.logo{background:#F05820;padding:10px;color:white;font-weight:bold}.arr{background:#0F2A4A;color:white;padding:10px 40px;margin:40px;width:fit-content;clip-path:polygon(0% 0%,90% 0%,100% 50%,90% 100%,0% 100%);font-weight:bold;font-size:1.2rem}.tot{border:4px solid #0F2A4A;margin:40px;padding:30px;display:flex;justify-content:space-between;font-size:2rem;font-weight:800}</style></head><body><div class="head"><h1>ESTIMATED FIRST BILL</h1><div class="logo">Consumer Cellular</div></div><div class="arr">MONTHLY RATE PLAN</div><div class="tot"><span>GRAND TOTAL</span><span>$${val}</span></div><script>window.print()<\/script></body></html>`);
        win.document.close();
    }

    // -- FULL PORTING DATABASE (100+ CARRIERS) --
    const carriers = [
        {n:"Verizon Wireless", p:"Number Transfer PIN via #PORT (Call #7678). Valid 7 days."},
        {n:"AT&T Wireless", p:"Port-out PIN via *PORT (Call *7678). Valid 4 days."},
        {n:"T-Mobile", p:"NTP via T-Mobile App > Account > Line Settings. Or Account Hub."},
        {n:"Straight Talk", p:"Text NTP to 611611. PIN is often dynamic."},
        {n:"Tracfone", p:"Text NTP to 611611. Account # is usually IMEI/SIM."},
        {n:"Spectrum Mobile", p:"Account PIN found on Page 1 of Bill (PDF)."},
        {n:"Xfinity Mobile", p:"Request NTP via Xfinity App > Devices > Transfer."},
        {n:"Cricket Wireless", p:"NTP via myCricket App or *PORT."},
        {n:"Boost Mobile", p:"Call 611 or Port Department for PIN."},
        {n:"Mint Mobile", p:"Request via App > Account > Port Out."},
        {n:"Google Fi", p:"Unlock number via Fi App (gives Acct & PIN)."},
        {n:"Lively / Jitterbug", p:"Call Customer Service for alphanumeric PIN."},
        {n:"US Cellular", p:"Call Port Department. PIN is often 4-digit security code."},
        {n:"Consumer Cellular", p:"Last 4 of Primary SSN (Default)."},
        {n:"Metro by T-Mobile", p:"PIN in MyMetro App (Profile/Account)."},
        {n:"Visible", p:"Request Port PIN via App > Account > Privacy."},
        {n:"PureTalk", p:"Call Customer Service to release number."},
        {n:"Red Pocket", p:"Available in Online Account Dashboard."},
        {n:"Simple Mobile", p:"Text NTP to 611611."},
        {n:"Total Wireless", p:"Text NTP to 611611."},
        {n:"Net10", p:"Text NTP to 611611."},
        {n:"Page Plus", p:"Text NTP to 611611."},
        {n:"Walmart Family Mobile", p:"Text NTP to 611611."},
        {n:"SafeLink", p:"Enrollment ID is often Account #. Call for PIN."},
        {n:"Assurance Wireless", p:"6-digit PIN found in Account Settings."},
        {n:"H2O Wireless", p:"Call Customer Service for Port PIN."},
        {n:"Lyca Mobile", p:"Call CS for PAC code."},
        {n:"Ultra Mobile", p:"Call CS for Account/PIN."},
        {n:"Republic Wireless", p:"Online Account Portal."},
        {n:"Tello", p:"Online Account Dashboard."},
        {n:"Twigby", p:"Online Account Dashboard (Chat only support)."},
        {n:"US Mobile", p:"Online Dashboard > Line > Port Out."},
        {n:"Wing", p:"Call Customer Service."},
        {n:"Q Link Wireless", p:"Online Account."},
        {n:"Access Wireless", p:"Call Customer Service."},
        {n:"Airvoice Wireless", p:"Call Customer Service."},
        {n:"Gen Mobile", p:"Call Customer Service."},
        {n:"Good2Go Mobile", p:"Online Account."},
        {n:"GreatCall", p:"Call CS (See Lively)."},
        {n:"Hello Mobile", p:"Online Account."},
        {n:"Patriot Mobile", p:"Online or Call CS."},
        {n:"Selectel", p:"Call Customer Service."},
        {n:"Reach Mobile", p:"Call Customer Service."},
        {n:"Pix Wireless", p:"Online Account."},
        {n:"Ting", p:"Online Settings > Port Out info."},
        {n:"Credo Mobile", p:"Text ACCOUNT to 27336."},
        {n:"Flash Wireless", p:"Online Account."},
        {n:"Family Mobile", p:"Text NTP to 611611."},
        {n:"Boom Mobile", p:"Call Customer Service."},
        {n:"Boss Wireless", p:"Call Customer Service."},
        {n:"Black Wireless", p:"Call Customer Service."},
        {n:"Cellcom", p:"Call Customer Service."},
        {n:"Carolina West", p:"Call Customer Service."},
        {n:"C-Spire", p:"Call Customer Service."},
        {n:"Inland Cellular", p:"Call Customer Service."},
        {n:"Nex-Tech", p:"Call Customer Service."},
        {n:"Pine Cellular", p:"Call Customer Service."},
        {n:"Pioneer Cellular", p:"Call Customer Service."},
        {n:"Union Wireless", p:"Call Customer Service."},
        {n:"Viaero", p:"Call Customer Service."},
        {n:"West Central", p:"Call Customer Service."},
        {n:"Appalachian Wireless", p:"Call Customer Service."},
        {n:"Bluegrass Cellular", p:"Call Customer Service."},
        {n:"Chat Mobility", p:"Call Customer Service."},
        {n:"Copper Valley", p:"Call Customer Service."},
        {n:"GCI", p:"Call Customer Service."},
        {n:"Illinois Valley", p:"Call Customer Service."},
        {n:"James Valley", p:"Call Customer Service."},
        {n:"Nemont", p:"Call Customer Service."},
        {n:"NorthwestCell", p:"Call Customer Service."},
        {n:"Panhandle", p:"Call Customer Service."},
        {n:"Silver Star", p:"Call Customer Service."},
        {n:"Snake River", p:"Call Customer Service."},
        {n:"STRATA", p:"Call Customer Service."},
        {n:"Syringa", p:"Call Customer Service."},
        {n:"Thumb Cellular", p:"Call Customer Service."},
        {n:"United Wireless", p:"Call Customer Service."},
        {n:"Bravado", p:"Call Customer Service."},
        {n:"Altice Mobile", p:"Call Customer Service."},
        {n:"Optimum Mobile", p:"Call Customer Service."},
        {n:"Cox Mobile", p:"Call Customer Service."},
        {n:"TextNow", p:"Email support often required for Port Out info."},
        {n:"FreedomPop", p:"Online Account > Port Out."},
        {n:"Unreal Mobile", p:"Online Account."}
    ];

    // -- FULL TROUBLESHOOTING DATABASE (31+ DEVICES) --
    const tsGuides = [
        {t:"iPhone 17 Pro Max", c:"1. Cellular Fix: Settings > Cellular > Toggle Plan Off/On after 30s.\n2. Network Reset: Settings > General > Transfer or Reset > Reset Network Settings.\n3. VoiceOver: Tap once to select, double-tap to activate/off."},
        {t:"iPhone 17 Pro", c:"1. Display lag: Verify Low Power Mode is Off.\n2. Force Restart: Up Vol, Down Vol, Hold Power.\n3. Reset All Settings."},
        {t:"iPhone 17 Air", c:"1. Battery: Check Background App Refresh.\n2. Connection: Cycle Airplane Mode 10s.\n3. Update Carrier Settings."},
        {t:"iPhone 17", c:"1. Cellular: Toggle Main Plan.\n2. Reseat SIM.\n3. Clear Safari Cache."},
        {t:"iPhone 16 Series", c:"1. Network Reset.\n2. SIM Pull (Physical).\n3. Soft Reset."},
        {t:"iPhone 15 Series", c:"1. Force Restart.\n2. Check Carrier Update.\n3. Toggle 5G Auto."},
        {t:"iPhone SE (3rd Gen)", c:"1. Toggle Home Button Haptics.\n2. Network Reset.\n3. Reseat SIM."},
        {t:"Samsung S25 Ultra", c:"1. Safe Mode: Restart + Hold Vol Down.\n2. Wipe Cache Partition in Recovery.\n3. Toggle eSIM."},
        {t:"Samsung S25 FE", c:"1. App Crash: Clear Cache in App Info.\n2. Device Care: Run Optimizer."},
        {t:"Samsung S25 Edge", c:"1. Screen: Recalibrate Touch Sensitivity.\n2. Edge Panel: Toggle Off."},
        {t:"Samsung S25", c:"1. eSIM: Toggle Plan in Connections.\n2. System UI: Force Stop."},
        {t:"Galaxy Z Fold 7", c:"1. Hinge: Open/Close 3x quickly.\n2. Screen: Clean inner display with microfiber only.\n3. Soft Reset."},
        {t:"Galaxy Z Flip 7 FE", c:"1. Cover Screen: Remove widgets and add back 1 by 1.\n2. Camera Shutter lag: Turn off Scene Optimizer."},
        {t:"Galaxy A15 (Physical SIM)", c:"1. Network: Turn off, remove SIM for 60s, reinsert, turn on.\n2. TalkBack: Settings > Accessibility > TalkBack > OFF."},
        {t:"Galaxy A36 5G (eSIM)", c:"1. Network: Settings > Connections > SIM manager > Toggle eSIM.\n2. RAM Plus: Lower the value in Battery/Device Care."},
        {t:"Galaxy A16", c:"1. SD Card: Unmount/Remount.\n2. Safe Mode check."},
        {t:"Galaxy Tab A11", c:"1. Multi-User: Switch profiles and back to clear glitches.\n2. Dex Mode: Toggle."},
        {t:"Moto Razr 2025", c:"1. Connection: Settings > Network > Internet > Toggle Mobile Data.\n2. Proximity: Clean cover screen sensor area."},
        {t:"Moto Razr 2024", c:"1. Audio: Reset Dolby Atmos.\n2. Peek Display: Toggle Off/On."},
        {t:"Moto G Power 2025", c:"1. Battery Saver: Ensure main saver mode is off.\n2. Fingerprint: Delete and re-register fingerprint if failing."},
        {t:"Moto G Stylus 2025", c:"1. Stylus: Remove and re-insert firmly.\n2. Screen Record: Force stop service in Apps if notification sticks."},
        {t:"Moto G Play 2024", c:"1. SIM: Pull and clean.\n2. Reboot."},
        {t:"Moto Edge 2024", c:"1. Edge Touch: Adjust prevention zone.\n2. ReadyFor: Reset connection."},
        {t:"Google Pixel 10", c:"1. Connectivity: Disable Adaptive Connectivity.\n2. Reset Wi-Fi/BT."},
        {t:"Google Pixel 9", c:"1. Screen Call: Toggle settings.\n2. Network Reset."},
        {t:"Iris Eazy Flip", c:"1. T9: Cycle # key.\n2. Contrast: Set Max.\n3. Volume: Check side keys."},
        {t:"Verve Home Base", c:"1. Power: Unplug 2 mins.\n2. Antenna: Rotate 90deg.\n3. Signal: Move to window."},
        {t:"Iris Home Base", c:"1. Display: Check for error code.\n2. Power Cycle."},
        {t:"Iris Ally", c:"1. SOS: Test call.\n2. Cradle: Check green light."},
        {t:"Apple Watch Ultra 3", c:"1. Action Button: Check assignment.\n2. Water Lock: Toggle."},
        {t:"Apple Watch Series 11", c:"1. Crown: Clean and press.\n2. Unpair/Re-pair."},
        {t:"Apple Watch SE", c:"1. Haptics: Check silent mode."}
    ];

    // --- 5. INITIALIZATION ---
    function initData() {
        // Plans
        const pSel = document.getElementById('be-plan');
        plans.forEach((p, i) => { const opt = document.createElement('option'); opt.value = i; opt.text = `${p.name} ($${p.price})`; pSel.appendChild(opt); });
        
        // Plan List
        const plList = document.getElementById('plan-list-cont');
        plans.forEach((p,i) => { let d = document.createElement('div'); d.className='list-item'; d.innerText=p.name; d.onclick=()=>showPlan(i); plList.appendChild(d); });

        // Troubleshooting
        const tc = document.getElementById('ts-container');
        tsGuides.forEach(g => {
            const el = document.createElement('div'); el.className = 'ts-card';
            el.innerHTML = `<div class="ts-name">${g.t}</div><div class="ts-details">${g.c}</div><button class="btn-primary" style="font-size:0.8rem; padding:8px 15px;" onclick="printTS('${g.t}')">Print Guide</button>`;
            tc.appendChild(el);
        });

        // Carriers
        const pc = document.getElementById('port-container');
        carriers.sort((a,b)=>a.n.localeCompare(b.n)).forEach(c => {
            const el = document.createElement('li'); el.className = 'list-item';
            el.onclick = function() { this.classList.toggle('expanded'); };
            el.innerHTML = `<div class="list-header"><span>${c.n}</span></div><div class="list-detail">${c.p}</div>`;
            pc.appendChild(el);
        });
        runBill();
    }

    function showPlan(i) {
        let p = plans[i];
        document.getElementById('plan-detail-cont').innerHTML = `<h3>${p.name}</h3><div style="font-size:2rem; color:var(--accent); font-weight:800;">$${p.price}/mo</div><p>${p.desc}</p>`;
    }

    function searchTS() {
        const q = document.getElementById('ts-search').value.toLowerCase();
        document.querySelectorAll('.ts-card').forEach(c => c.style.display = c.innerText.toLowerCase().includes(q) ? 'flex' : 'none');
    }

    function searchPort() {
        const q = document.getElementById('port-search').value.toLowerCase();
        document.querySelectorAll('#port-container .list-item').forEach(i => i.style.display = i.innerText.toLowerCase().includes(q) ? 'block' : 'none');
    }

    function printTS(title) {
        const g = tsGuides.find(x => x.t === title);
        const win = window.open('', '_blank');
        win.document.write(`<html><head><style>body{font-family:sans-serif; padding:40px; color:#0F2A4A;} h1{border-bottom:5px solid #F05820; padding-bottom:10px;}</style></head><body><h1>${g.t} Quick Guide</h1><pre style="font-size:1.3rem; white-space:pre-wrap;">${g.c}</pre><script>window.print();<\/script></body></html>`);
        win.document.close();
    }
    
    function printPlan() {
        // Simple print for current selected plan
        window.print(); 
    }
</script>
</body>
</html>
